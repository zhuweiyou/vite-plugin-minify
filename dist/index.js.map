{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { Plugin } from 'vite'\nimport { minify, Options } from 'html-minifier-terser'\n\n/**\n * @param options [html-minifier-terser options](https://github.com/terser/html-minifier-terser?tab=readme-ov-file#options-quick-reference)\n *\n * @default\n *\n * {\n * \tremoveComments: true,\n * \tcollapseWhitespace: true,\n * \tcollapseBooleanAttributes: true,\n * \tremoveAttributeQuotes: false,\n * \tremoveEmptyAttributes: true,\n * \tminifyCSS: true,\n * \tminifyJS: true,\n * \tminifyURLs: true,\n * \t...options, // user provided options\n * }\n *\n * @returns vite-plugin-minify\n */\nexport function ViteMinifyPlugin(options?: Options): Plugin {\n  return {\n    name: 'vite-plugin-minify',\n    apply: 'build',\n    transformIndexHtml: {\n      order: 'post',\n      handler(html) {\n        return minify(html, {\n          removeComments: true,\n          collapseWhitespace: true,\n          collapseBooleanAttributes: true,\n          removeAttributeQuotes: false,\n          removeEmptyAttributes: true,\n          minifyCSS: true,\n          minifyJS: true,\n          minifyURLs: true,\n          ...options,\n        })\n      },\n    },\n  }\n}\n\nexport default ViteMinifyPlugin\n"],"mappings":"AACA,OAAS,UAAAA,MAAuB,uBAqBzB,SAASC,EAAiBC,EAA2B,CAC1D,MAAO,CACL,KAAM,qBACN,MAAO,QACP,mBAAoB,CAClB,MAAO,OACP,QAAQC,EAAM,CACZ,OAAOH,EAAOG,EAAM,CAClB,eAAgB,GAChB,mBAAoB,GACpB,0BAA2B,GAC3B,sBAAuB,GACvB,sBAAuB,GACvB,UAAW,GACX,SAAU,GACV,WAAY,GACZ,GAAGD,CACL,CAAC,CACH,CACF,CACF,CACF,CAEA,IAAOE,EAAQH","names":["minify","ViteMinifyPlugin","options","html","src_default"]}