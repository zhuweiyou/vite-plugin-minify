{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { Plugin, ResolvedConfig } from 'vite'\nimport { minify, Options } from 'html-minifier-terser'\n\nconst PLUGIN_NAME = 'vite-plugin-minify'\n\nexport function ViteMinifyPlugin(options?: Options): Plugin {\n  let config: ResolvedConfig\n\n  return {\n    name: PLUGIN_NAME,\n    enforce: 'post',\n    apply: 'build',\n    configResolved: (resolvedConfig) => {\n      config = resolvedConfig\n    },\n    transformIndexHtml: (html) => {\n      if (config.mode !== 'production') {\n        return html\n      }\n      return minify(html, {\n        removeComments: true,\n        collapseWhitespace: true,\n        collapseBooleanAttributes: true,\n        removeAttributeQuotes: false,\n        removeEmptyAttributes: true,\n        minifyCSS: true,\n        minifyJS: true,\n        minifyURLs: true,\n        ...options,\n      })\n    },\n  }\n}\n\nexport default ViteMinifyPlugin\n"],"mappings":"yVACA,8CAEA,GAAM,GAAc,qBAEb,WAA0B,EAA2B,CAC1D,GAAI,GAEJ,MAAO,CACL,KAAM,EACN,QAAS,OACT,MAAO,QACP,eAAgB,AAAC,GAAmB,CAClC,EAAS,CACX,EACA,mBAAoB,AAAC,GACf,EAAO,OAAS,aACX,EAEF,EAAO,EAAM,GAClB,eAAgB,GAChB,mBAAoB,GACpB,0BAA2B,GAC3B,sBAAuB,GACvB,sBAAuB,GACvB,UAAW,GACX,SAAU,GACV,WAAY,IACT,EACJ,CAEL,CACF,CAEA,GAAO,GAAQ","names":[]}